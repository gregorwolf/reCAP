/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/support/supportRules/Storage","sap/ui/support/supportRules/Constants","sap/ui/support/supportRules/ui/models/SelectionUtils","sap/ui/support/supportRules/ui/models/PresetsUtils"],function(e,t,s,i,o){"use strict";return e.extend("sap.ui.support.supportRules.ui.controllers.BaseController",{onPersistedSettingSelect:function(){var e=this.getView().getModel();if(e.getProperty("/persistingSettings")){t.createPersistenceCookie(s.COOKIE_NAME,true);e.getProperty("/libraries").forEach(function(e){if(e.title==s.TEMP_RULESETS_NAME){t.setRules(e.rules)}});this.persistExecutionScope();this.persistVisibleColumns();i.persistSelection();o.persistSelectionPresets();o.persistCustomPresets()}else{t.deletePersistenceCookie(s.COOKIE_NAME);this.deletePersistedData()}},persistExecutionScope:function(){var e={analyzeContext:this.model.getProperty("/analyzeContext"),subtreeExecutionContextId:this.model.getProperty("/subtreeExecutionContextId")},s=this.model.getProperty("/executionScopeComponents");t.setSelectedScopeComponents(s);t.setSelectedContext(e)},persistVisibleColumns:function(){var e=[],s=i.treeTable.getColumns();s.forEach(function(t){if(t.getVisible()){e.push(t.sId)}});t.setVisibleColumns(e)},deletePersistedData:function(){t.deletePersistenceCookie(s.COOKIE_NAME);this.getView().getModel().setProperty("/persistingSettings",false);t.removeAllData()}})});