/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/restricted/_pick","sap/ui/fl/Change","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/LayerUtils","sap/ui/fl/Utils"],function(e,t,n,r,a,i){"use strict";function s(e){var t=i.getUshellContainer();var n=t&&t.getUser();return!n||n.getId().toUpperCase()===e.toUpperCase()}function o(e,t){if(e===n.USER){return true}var i=r.getInstanceOrUndef();var o;if(a.isSapUiLayerParameterProvided()){o=a.getCurrentLayer()}else{o=i.isPublicLayerAvailable()?n.PUBLIC:n.CUSTOMER}var c=e===o;var u=i.isKeyUser()||s(t);return c&&u}function c(e){if(!e){return false}return i.getCurrentLanguage()!==e}function u(e,t){var n=r.getInstanceOrUndef();if(!n){return true}if(!e||!t){return true}var a=n.getSystem();var i=n.getClient();return a===e&&t===i}var l=t.extend("sap.ui.fl.apply._internal.flexObjects.Variant",{metadata:{properties:{favorite:{type:"boolean",defaultValue:false},executeOnSelection:{type:"boolean",defaultValue:false},contexts:{type:"object",defaultValue:{}}},aggregations:{revertInfo:{type:"sap.ui.fl.apply._internal.flexObjects.CompVariantRevertData",multiple:true,singularName:"revertInfo",defaultValue:[]}}},constructor:function(e){t.apply(this,arguments);if(e.content&&e.content.favorite){this.setFavorite(e.content.favorite)}if(e.content&&e.content.executeOnSelect){this.setExecuteOnSelection(e.content.executeOnSelect)}if(e.content&&e.content.executeOnSelection){this.setExecuteOnSelection(e.content.executeOnSelection)}if(e.contexts){this.setProperty("contexts",e.contexts)}}});l.prototype.isReadOnly=function(){return!u(this.getSourceSystem(),this.getSourceClient())||!o(this.getLayer(),this.getOwnerId())};l.prototype.isLabelReadOnly=function(){return this.isReadOnly()||c(this.getOriginalLanguage())};l.createInitialFileContent=function(n){var r=t.createInitialFileContent(n);r.contexts=n.contexts||{};return e(r,["changeType","namespace","service","content","reference","fileName","fileType","packageName","layer","favorite","executeOnSelect","selector","texts","support","contexts"])};l.prototype.setContexts=function(e){this.setProperty("contexts",e);this._oDefinition.contexts=e;this.setState(t.states.DIRTY)};return l});