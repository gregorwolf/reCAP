/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/ManagedObjectObserver","sap/ui/core/util/reflection/JsControlTreeModifier"],function(e,t){"use strict";var n={};var r={};var i={};var o={};function a(e){var t=e.object.getId();i[t].forEach(function(e){o[e.view.getId()][e.name].bParentIsDestroyed=true})}function g(e){var n=e.object.getId();i[n].forEach(function(n){var r=n.aggregationName;if(r===e.name){var i=t.getAggregation(e.object,r);var o=[].concat(i||[]).map(function(e){return e.getId()});if(e.mutation==="insert"){if(o.indexOf(e.child.getId())<n.index){n.index++}}else if(n.aggregation.indexOf(e.child.getId())<n.index){n.index--}n.aggregation=o}})}function s(e){if(e.type==="destroy"){a(e)}else{g(e)}}function c(t,n){var i=t.getId();if(!r[i]){var o=new e(s.bind(this));o.observe(t,{aggregations:[n],destroy:true});r[i]={observer:o,aggregations:[n]}}else{var a=r[i].observer.isObserved(t,{aggregations:[n]});if(!a){r[i].aggregations.push(n);r[i].observer.observe(t,{aggregations:r[i].aggregations,destroy:true})}}}function f(e,n,r){var a=r.view.getId();var g=t.getAggregation(e,n);var s=[].concat(g||[]).map(function(e){return e.getId()});var c=e.getId();if(!i[c]){i[c]=[]}if(!o[a]){o[a]={}}r.aggregation=s;i[c].push(r);o[a][r.name]=r}n.registerExtensionPoint=function(e){var t=e.targetControl;var n=e.aggregationName;c(t,n);f(t,n,e)};n.getExtensionPointInfo=function(e,t){return o[t.getId()]&&o[t.getId()][e]};n.getExtensionPointInfoByViewId=function(e){return o[e]||{}};n.getExtensionPointInfoByParentId=function(e){return i[e]||[]};n.clear=function(){Object.keys(r).forEach(function(e){r[e].observer.disconnect();r[e].observer.destroy()});r={};i={};o={}};return n},true);