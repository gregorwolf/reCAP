/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/write/_internal/flexState/compVariants/CompVariantState","sap/ui/fl/write/_internal/transport/TransportSelection","sap/ui/fl/registry/Settings","sap/ui/fl/apply/_internal/flexState/ManifestUtils"],function(e,t,n,r){"use strict";function i(e){return e&&e.getPersistencyKey&&e.getPersistencyKey()}function a(e,t){e.persistencyKey=i(e.control);if(!e.reference){e.reference=r.getFlexReferenceForControl(e.control)}return t(e)}var u={add:function(t){return a(t,e.add).getId()},addVariant:function(t){t.changeSpecificData.isVariant=true;return a(t,e.add)},updateVariant:function(t){t.executeOnSelection=t.executeOnSelect;return a(t,e.updateVariant)},removeVariant:function(t){return a(t,e.removeVariant)},revert:function(t){return a(t,e.revert)},save:function(t){return a(t,e.persist)},setDefaultVariantId:function(t){return a(t,e.setDefault)},setExecuteOnSelection:function(t){return a(t,e.setExecuteOnSelection)},setExecuteOnSelect:function(e){e.executeOnSelection=e.executeOnSelect;return u.setExecuteOnSelection(e)},isVariantSharingEnabled:function(){return n.getInstance().then(function(e){return e.isVariantSharingEnabled()})},isVariantPersonalizationEnabled:function(){return n.getInstance().then(function(e){return e.isVariantPersonalizationEnabled()})},isVariantAdaptationEnabled:function(){return n.getInstance().then(function(e){return e.isPublicLayerAvailable()})},_getTransportSelection:function(){return new t}};return u},true);