/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/mvc/View","sap/ui/core/mvc/ViewType","sap/ui/core/Component","sap/ui/core/routing/HashChanger"],function(e,t,n,i){"use strict";return{_getObjectWithGlobalId:function(i,a,r){var o=this,s,u,c,h=this._oComponent,f=[];r=r||{};function g(){switch(a){case"View":i.viewName=i.name;delete i.name;if(i.type===t.XML&&!i.processingMode){i.processingMode="sequential"}return e._legacyCreate(i);case"Component":i.settings=i.settings||{};i.settings._propagateTitle=r.propagateTitle;var s=o._createRouterHashChanger(r.prefix);if(s){i.settings._routerHashChanger=s}if(i.usage){return h.createComponent(i)}else{return n.create(i)}break;default:}}function p(e){if(o._oCache){f.forEach(function(t){c[t]=e});if(r.afterCreate){r.afterCreate(e)}o.fireCreated({object:e,type:a,options:i})}return e}if(i.async===undefined){i.async=true}u=i.usage||i.name;this._checkName(u,a);c=this._oCache[a.toLowerCase()][u];s=c&&c[i.id];if(s){return s}if(h){s=h.runAsOwner(g)}else{s=g()}if(s instanceof Promise){s=s.then(p)}else{s.loaded().then(p)}if(!c){c=this._oCache[a.toLowerCase()][u]={};c[undefined]=s;f.push(undefined)}if(i.id!==undefined){c[i.id]=s;f.push(i.id)}return s},_getViewWithGlobalId:function(e){if(e&&!e.name){e.name=e.viewName}return this._getObjectWithGlobalId(e,"View")},_getComponentWithGlobalId:function(e,t){return this._getObjectWithGlobalId(e,"Component",t)},_createRouterHashChanger:function(e){var t;var n=this._oComponent&&this._oComponent.getRouter();if(n){t=n.getHashChanger();if(t&&e){t=t.createSubHashChanger(e)}}return t||i.getInstance().createRouterHashChanger()}}});